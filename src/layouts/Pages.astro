---
import Layout from '../layouts/Layout.astro';
import background from '../assets/background.svg';
import Nav from '../components/Nav.astro';
import NavMobile from '../components/NavMobile.astro';
import Sidebar from '../components/Sidebar.astro';
---

<Layout>
  <img id="background" src={background.src} alt="" fetchpriority="high" />
  <div class="flex w-full min-h-screen justify-center">
    <div class="flex min-h-screen w-full flex-col md:flex-row md:justify-center">
      <aside
        class="hidden md:block md:flex md:flex-none md:flex-col md:min-w-48 p-4 sticky top-0 h-screen overflow-y-auto"
      >
        <Nav />
      </aside>

      <div class="flex flex-1 w-full md:min-w-xl lg:min-w-xl lg:max-w-3xl justify-center">
        <main class="w-full mx-auto md:border-x border-primary/20">
          <div class="py-6">
            <slot />
          </div>
          <div class="h-20"></div>
        </main>
      </div>

      <aside class="hidden xl:block lg:min-w-48 p-4 sticky top-0 h-screen overflow-y-auto">
        <Sidebar />
      </aside>

      <nav
        class="md:hidden fixed bottom-0 left-0 right-0 bg-black/70 backdrop-blur-xs border-t border-primary/40 flex justify-around"
        style="padding-bottom: env(safe-area-inset-bottom);"
      >
        <NavMobile />
      </nav>
    </div>
  </div>
</Layout>

<style>
  #background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    filter: blur(66px) opacity(12%);
  }
</style>
